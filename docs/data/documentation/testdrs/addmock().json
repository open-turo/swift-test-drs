{"schemaVersion":{"patch":0,"major":0,"minor":3},"seeAlsoSections":[{"identifiers":["doc:\/\/TestDRS\/documentation\/TestDRS\/Mock()"],"generated":true,"anchor":"Creating-test-doubles","title":"Creating test doubles"}],"hierarchy":{"paths":[["doc:\/\/TestDRS\/documentation\/TestDRS"]]},"abstract":[{"type":"text","text":"This macro generates a mock type based on a given protocol, class, or struct."}],"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"tokens":[{"text":"@attached","kind":"attribute"},{"text":"(peer, names: prefixed(Mock)) ","kind":"text"},{"text":"macro","kind":"keyword"},{"kind":"text","text":" "},{"text":"AddMock","kind":"identifier"},{"text":"()","kind":"text"}],"languages":["swift"]}]},{"kind":"content","content":[{"level":2,"anchor":"overview","text":"Overview","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The generated mock type includes methods that mimic the original typeâ€™s interface, allowing you to control its behavior in tests."},{"text":" ","type":"text"},{"type":"text","text":"For a given type "},{"type":"codeVoice","code":"MyType"},{"text":", the generated mock type will be named ","type":"text"},{"type":"codeVoice","code":"MockMyType"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"The mock type will conform to the "},{"type":"codeVoice","code":"Mock"},{"type":"text","text":" protocol, which provides stubbing and verification capabilities."}]},{"text":"Mock Generation Rules:","type":"heading","anchor":"Mock-Generation-Rules","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Classes will be mocked using a subclass","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Protocols and structs will be mocked using a separate class\/struct","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Private members are not included in the generated mock type"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Final classes cannot be mocked (as they cannot be subclassed)","type":"text"}]}]},{"content":[{"inlineContent":[{"text":"Final members of a class cannot be mocked (as they cannot be overridden)","type":"text"}],"type":"paragraph"}]}]},{"anchor":"Member-Handling","level":2,"text":"Member Handling:","type":"heading"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Mocked classes will override all non-private, non-final instance members","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Static members of a class will not be included in the mock as they cannot be overridden"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Protocol and struct mocks will include all non-private members"}],"type":"paragraph"}]}]},{"anchor":"Initializer-Handling","level":2,"type":"heading","text":"Initializer Handling:"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"For protocols and structs, an empty initializer ("},{"code":"init()","type":"codeVoice"},{"type":"text","text":") is always provided"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Any non-empty initializers from the original type are included but marked as deprecated to encourage using the empty initializer"}]}]},{"content":[{"inlineContent":[{"text":"Class mocks do not include initializers, as they use the parent class initializers","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"aside","name":"Note","content":[{"type":"paragraph","inlineContent":[{"text":"None of the initializers, including inherited ones, will automatically stub any properties. Properties must be stubbed manually after initialization.","type":"text"}]}],"style":"note"},{"inlineContent":[{"type":"text","text":"Usage:"}],"type":"paragraph"},{"syntax":null,"code":["@AddMock","protocol MyType {","    func myMethod()","}"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This will generate a "},{"code":"MockMyType","type":"codeVoice"},{"text":" with the following structure:","type":"text"}]},{"type":"codeListing","syntax":null,"code":["#if DEBUG","","class MockMyType: MyType, Mock {","    func myMethod() {","        \/\/ Implementation for stubbing and spying","    }","}","","#endif"]},{"style":"note","name":"Note","content":[{"inlineContent":[{"text":"The generated mock type will be wrapped in an ","type":"text"},{"code":"#if DEBUG","type":"codeVoice"},{"type":"text","text":" directive, meaning it will only be included in Debug builds."},{"type":"text","text":" "},{"text":"This ensures that mock types are not included in production code.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"The generated mock type is intended for use in unit tests, during development, in SwiftUI previews, etc."}],"type":"paragraph"}],"type":"aside"}]}],"metadata":{"externalID":"s:7TestDRS7AddMockyycfm","title":"AddMock()","fragments":[{"kind":"keyword","text":"macro"},{"kind":"text","text":" "},{"text":"AddMock","kind":"identifier"},{"text":"()","kind":"text"}],"roleHeading":"Macro","role":"symbol","symbolKind":"macro","modules":[{"name":"TestDRS"}]},"kind":"symbol","identifier":{"url":"doc:\/\/TestDRS\/documentation\/TestDRS\/AddMock()","interfaceLanguage":"swift"},"sections":[],"variants":[{"paths":["\/documentation\/testdrs\/addmock()"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://TestDRS/documentation/TestDRS/AddMock()":{"kind":"symbol","role":"symbol","fragments":[{"text":"macro","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"AddMock"},{"text":"()","kind":"text"}],"type":"topic","identifier":"doc:\/\/TestDRS\/documentation\/TestDRS\/AddMock()","abstract":[{"text":"This macro generates a mock type based on a given protocol, class, or struct.","type":"text"}],"url":"\/documentation\/testdrs\/addmock()","title":"AddMock()"},"doc://TestDRS/documentation/TestDRS":{"type":"topic","kind":"symbol","url":"\/documentation\/testdrs","abstract":[{"text":"A modern Swift testing library that provides powerful mocking, stubbing, and verification capabilities through Swift macros.","type":"text"}],"title":"TestDRS","role":"collection","identifier":"doc:\/\/TestDRS\/documentation\/TestDRS"},"doc://TestDRS/documentation/TestDRS/Mock()":{"type":"topic","title":"Mock()","url":"\/documentation\/testdrs\/mock()","role":"symbol","fragments":[{"text":"macro","kind":"keyword"},{"kind":"text","text":" "},{"text":"Mock","kind":"identifier"},{"text":"()","kind":"text"}],"abstract":[{"text":"This macro mocks the members of the struct or class that it is applied to.","type":"text"}],"identifier":"doc:\/\/TestDRS\/documentation\/TestDRS\/Mock()","kind":"symbol"}}}